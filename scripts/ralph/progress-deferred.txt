Task 1 - Detector registry pattern: DONE (eccc4e9)
  - Added detection_mode() abstract method to BaseDetector
  - Implemented detection_mode() on FaceBiSeNetDetector and YOLOv8SegDetector
  - Added _SETTINGS_MAP in __init__.py for config→constructor kwargs mapping
  - Enhanced create_detector() to accept settings object
  - Refactored get_detector_sync() to use registry lookup (no more if/elif)
  - app.py no longer imports individual detector classes
  - Quality gate: py_compile passed on app.py, __init__.py, base.py

Task 2 - WebSocket message schemas with Pydantic: DONE
  - Created server/schemas.py with Pydantic BaseModel classes:
    DetectionResponse, InpaintStarted, InpaintProgress, InpaintDone, InpaintCancelled, ErrorResponse
  - Updated ws_detect in app.py to use DetectionResponse and ErrorResponse
  - Updated ws_inpaint error in app.py to use ErrorResponse
  - Refactored InpaintOrchestrator: replaced all dict construction with schema models
  - Renamed _send() to _send_model() using model_dump_json() instead of json.dumps()
  - Added from __future__ import annotations to inpaint_orchestrator.py
  - JSON keys unchanged — frontend contract preserved
  - Quality gate: py_compile passed on schemas.py, app.py, inpaint_orchestrator.py

Task 3 - Frontend state machine refactor: DONE
  - Replaced 27+ loose var globals with structured objects: el (DOM), ctx (canvas contexts), state (app state)
  - state object organized into: { camera, detection, inpainting, ui }
  - Grouped functions into namespace objects: Util, UI, Camera, Detection, Inpainting, ModelStatus, Capture
  - Camera: populateDevices(), start(), stop(), toggle()
  - Detection: connect(), reconnect(), sendFrame()
  - Inpainting: connect(), generate(), cancel()
  - Extracted Capture.take() from inline event handler
  - Event bindings grouped in dedicated section
  - Initialization section at bottom: updateModeUI(), poll(), camera enumerate
  - Kept IIFE pattern, no modules/bundler, no npm deps
  - All existing functionality preserved: detection stream, capture, inpainting with progress/cancel, mode switching
  - Quality gate: node --check static/app.js passed (no syntax errors)
